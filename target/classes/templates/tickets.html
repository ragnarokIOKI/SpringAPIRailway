<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Билеты</title>
    <link rel="stylesheet" th:href="@{/style.css}">
    <ul>
        <li><a href="/trains">Поезда</a></li>
        <li><a href="/traintypes">Виды поездов</a></li>
        <li><a href="/routes">Маршруты</a></li>
        <li><a href="/routestatuses">Статусы маршрутов</a></li>
        <li><a href="/routecompositions">Поезда на маршрутах</a></li>
        <li><a href="/users">Пользователи</a></li>
        <li><a href="/tickets">Билеты</a></li>
        <li><a href="/seattypes">Виды мест</a></li>
        <li><a href="/roles">Роли</a></li>
    </ul>
</head>
<body>
<table>
    <thead>
    <tr>
        <th>№</th>
        <th>Номер билета</th>
        <th>Номер места</th>
        <th>Тип места</th>
        <th>Пассажир</th>
        <th>Маршрут</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="ticket : ${tickets}">
        <td th:text="${ticket.id}"></td>
        <td th:text="${ticket.numberTicket}"></td>
        <td th:text="${ticket.numberSeat}"></td>
        <td th:text="${ticket.seatType.nameSeatType}"></td>
        <td th:text="${ticket.user.firstName + ' ' + ticket.user.secondName}"></td>
        <td th:text="${ticket.route.numberRoute}"></td>
        <td><a th:href="@{'/tickets/deleteticket/' + ${ticket.id}}">Удалить</a></td>
    </tr>
    </tbody>
</table>

<form th:action="@{/tickets/processTicket}" method="post">
    <label>
        <input type="text" th:name="numberTicket" placeholder="Номер билета">
    </label>
    <label>
        <input type="number" th:name="numberSeat" placeholder="Номер места">
    </label>
    <select th:name="seatType.id">
        <option th:each="type : ${seatTypes}" th:value="${type.id}" th:text="${type.nameSeatType}"></option>
    </select>
    <select th:name="user.id">
        <option th:each="user : ${users}" th:value="${user.id}" th:text="${user.firstName + ' ' + user.secondName}"></option>
    </select>
    <select th:name="route.id">
        <option th:each="route : ${routes}" th:value="${route.id}" th:text="${route.numberRoute}"></option>
    </select>
    <input type="submit" value="Добавить">
</form>

<form th:action="@{/tickets/updateTicket}" method="post">
    <input type="hidden" th:name="_method" value="put"/>
    <label>
        <input type="number" th:name="id" placeholder="ID">
    </label>
    <label>
        <input type="text" th:name="numberTicket" placeholder="Номер билета">
    </label>
    <label>
        <input type="number" th:name="numberSeat" placeholder="Номер места">
    </label>
    <select th:name="seatType.id">
        <option th:each="type : ${seatTypes}" th:value="${type.id}" th:text="${type.nameSeatType}"></option>
    </select>
    <select th:name="user.id">
        <option th:each="user : ${users}" th:value="${user.id}" th:text="${user.firstName + ' ' + user.secondName}"></option>
    </select>
    <select th:name="route.id">
        <option th:each="route : ${routes}" th:value="${route.id}" th:text="${route.numberRoute}"></option>
    </select>
    <input type="submit" value="Обновить">
</form>
</body>
</html>

