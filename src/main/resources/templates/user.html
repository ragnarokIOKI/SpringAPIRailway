<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Пользователи</title>
    <link rel="stylesheet" th:href="@{/style.css}">
    <ul>
        <li><a href="/trains">Поезда</a></li>
        <li><a href="/traintypes">Виды поездов</a></li>
        <li><a href="/routes">Маршруты</a></li>
        <li><a href="/routestatuses">Статусы маршрутов</a></li>
        <li><a href="/routecompositions">Поезда на маршрутах</a></li>
        <li><a href="/users">Пользователи</a></li>
        <li><a href="/tickets">Билеты</a></li>
        <li><a href="/seattypes">Виды мест</a></li>
        <li><a href="/roles">Роли</a></li>
    </ul>
</head>
<body>
<table>
    <tbody>
    <tr>
        <form th:action="@{/users/search}" method="get" th:object="${user}">
            <label>
                <input type="text" th:name="lastName" placeholder="Поиск по фамилии">
            </label>
            <input type="submit" value="Поиск">
        </form>
    </tr>
    <tr>
        <form th:action="@{/users}" method="get" th:object="${user}">
            <input type="submit" value="Сброс" style="margin-left: 20px">
        </form>
    </tr>
    </tbody>
</table>

<table>
    <thead>
    <tr>
        <th>№</th>
        <th colspan="3">ФИО</th>
        <th>Дата рождения</th>
        <th>Серия паспорта</th>
        <th>Номер паспорта</th>
        <th colspan="3">Банковская карта</th>
        <th>Логин</th>
        <th>Роль</th>
        <th/>
    </tr>
    </thead>
    <tbody>
    <tr th:each="user : ${users}">
        <td th:text="${user.id}"></td>
        <td th:text="${user.firstName}"></td>
        <td th:text="${user.secondName}"></td>
        <td th:text="${user.middleName}"></td>
        <td th:text="${user.birthday}" style="width: 120px"></td>
        <td th:text="${user.passportSeries}"></td>
        <td th:text="${user.passportNumber}"></td>
        <td th:text="${user.cardNumber}" style="width: 230px;"></td>
        <td th:text="${user.cardHolder}"></td>
        <td th:text="${user.validity}"></td>
        <td th:text="${user.username}"></td>
        <td th:text="${user.role.nameRole}"></td>
        <td><a th:href="@{'/users/deleteUser/' + ${user.id}}">Удалить</a></td>
    </tr>
    </tbody>
</table>

<form th:action="@{/users/processUser}" method="post" th:object="${user}">
    <label>
        <input type="text" th:name="firstName" placeholder="Фамилия" required>
    </label>
    <label>
        <input type="text" th:name="secondName" placeholder="Имя" required>
    </label>
    <label>
        <input type="text" th:name="middleName" placeholder="Отчество">
    </label>
    <label>
        <input type="date" th:name="birthday" placeholder="Дата рождения" required>
    </label>
    <label>
        <input type="text" th:name="passportSeries" placeholder="Серия паспорта" required>
    </label>
    <label>
        <input type="text" th:name="passportNumber" placeholder="Номер паспорта" required>
    </label>
    <label>
        <input type="text" th:name="cardNumber" placeholder="Номер карты" required>
    </label>
    <label>
        <input type="text" th:name="cardHolder" placeholder="Владелец карты" required>
    </label>
    <label>
        <input type="text" th:name="validity" placeholder="Срок действия карты" required>
    </label>
    <label>
        <input type="text" th:name="username" placeholder="Логин" required>
    </label>
    <label>
        <input type="text" th:name="password" placeholder="Пароль" required>
    </label>
    <select th:name="role.id" th:object="${role}">
        <option th:each="role : ${roles}" th:value="${role.id}" th:text="${role.nameRole}"></option>
    </select>
    <input type="submit" value="Добавить">
</form>

<form th:action="@{/users/updateUser}" method="post" th:object="${user}">
    <input type="hidden" th:name="_method" value="put"/>
    <label>
        <input type="number" th:name="id" placeholder="ID">
    </label>
    <label>
        <input type="text" th:name="firstName" placeholder="Фамилия" required>
    </label>
    <label>
        <input type="text" th:name="secondName" placeholder="Имя" required>
    </label>
    <label>
        <input type="text" th:name="middleName" placeholder="Отчество">
    </label>
    <label>
        <input type="date" th:name="birthday" placeholder="Дата рождения" required>
    </label>
    <label>
        <input type="text" th:name="passportSeries" placeholder="Серия паспорта" required>
    </label>
    <label>
        <input type="text" th:name="passportNumber" placeholder="Номер паспорта" required>
    </label>
    <label>
        <input type="text" th:name="cardNumber" placeholder="Номер карты" required>
    </label>
    <label>
        <input type="text" th:name="cardHolder" placeholder="Владелец карты" required>
    </label>
    <label>
        <input type="text" th:name="validity" placeholder="Срок действия карты" required>
    </label>
    <label>
        <input type="text" th:name="username" placeholder="Логин" required>
    </label>
    <label>
        <input type="text" th:name="password" placeholder="Пароль" required>
    </label>
    <select th:name="role.id" th:object="${role}">
        <option th:each="role : ${roles}" th:value="${role.id}" th:text="${role.nameRole}"></option>
    </select>
    <input type="submit" value="Обновить">
</form>
</body>
</html>

